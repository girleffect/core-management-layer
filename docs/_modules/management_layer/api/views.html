

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>management_layer.api.views &mdash; Girl Effect: Core management layer  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Girl Effect: Core management layer
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Girl Effect: Core management layer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>management_layer.api.views</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for management_layer.api.views</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Do not modify this file. It is generated from the Swagger specification.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">jsonschema</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">jsonschema</span> <span class="k">import</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">aiohttp.web</span> <span class="k">import</span> <span class="n">View</span><span class="p">,</span> <span class="n">json_response</span><span class="p">,</span> <span class="n">Response</span><span class="p">,</span> <span class="n">HTTPNoContent</span>
<span class="kn">from</span> <span class="nn">aiohttp_cors</span> <span class="k">import</span> <span class="n">CorsViewMixin</span>

<span class="kn">import</span> <span class="nn">management_layer.api.schemas</span> <span class="k">as</span> <span class="nn">schemas</span>
<span class="kn">import</span> <span class="nn">management_layer.api.utils</span> <span class="k">as</span> <span class="nn">utils</span>

<span class="c1"># Set up logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">VALIDATE_RESPONSES</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SWAGGER_API_VALIDATE_RESPONSES&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Swagger API response validation is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="s2">&quot;on&quot;</span> <span class="k">if</span> <span class="n">VALIDATE_RESPONSES</span> <span class="k">else</span> <span class="s2">&quot;off&quot;</span>
<span class="p">))</span>

<span class="c1"># Set up the stub class. If it is not explicitly configured in the settings.py</span>
<span class="c1"># file of the project, we default to a mocked class.</span>
<span class="n">stub_class_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;STUBS_CLASS&quot;</span><span class="p">,</span> <span class="s2">&quot;management_layer.api.stubs.MockedStubClass&quot;</span><span class="p">)</span>
<span class="n">module_name</span><span class="p">,</span> <span class="n">class_name</span> <span class="o">=</span> <span class="n">stub_class_path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">Module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
<span class="n">Stubs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">Module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>


<div class="viewcode-block" id="maybe_validate_result"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.maybe_validate_result">[docs]</a><span class="k">def</span> <span class="nf">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">schema</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">VALIDATE_RESPONSES</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="Adminnotes"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Adminnotes">[docs]</a><span class="k">class</span> <span class="nc">Adminnotes</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;creator_id&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;The user making the request will be considered the creator and thus this field is not available when creating admin note.&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;user&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;note&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;user_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                }</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;user_id&quot;,</span>
<span class="s2">            &quot;creator_id&quot;,</span>
<span class="s2">            &quot;note&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">admin_note</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">admin_note_create</span>

<div class="viewcode-block" id="Adminnotes.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Adminnotes.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Adminnotes instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># user_id (optional): string An optional query parameter to filter by user_id</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
            <span class="c1"># creator_id (optional): string An optional query parameter to filter by creator (a user_id)</span>
            <span class="n">creator_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;creator_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">creator_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">creator_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;creator_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">creator_id</span>
            <span class="c1"># admin_note_ids (optional): array An optional list of adminnote ids</span>
            <span class="n">admin_note_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;admin_note_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">admin_note_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">admin_note_ids</span> <span class="o">=</span> <span class="n">admin_note_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">admin_note_ids</span><span class="p">:</span>
                <span class="n">admin_note_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">admin_note_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">admin_note_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">admin_note_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;admin_note_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">admin_note_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">adminnote_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Adminnotes.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Adminnotes.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Adminnotes instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">adminnote_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="AdminnotesAdminNoteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.AdminnotesAdminNoteId">[docs]</a><span class="k">class</span> <span class="nc">AdminnotesAdminNoteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">admin_note</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">admin_note</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">admin_note_update</span>

<div class="viewcode-block" id="AdminnotesAdminNoteId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.AdminnotesAdminNoteId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A AdminnotesAdminNoteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># admin_note_id: integer A unique integer value identifying the admin note.</span>
            <span class="n">admin_note_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;admin_note_id&quot;</span><span class="p">]</span>
            <span class="n">admin_note_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">admin_note_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">admin_note_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">adminnote_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">admin_note_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="AdminnotesAdminNoteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.AdminnotesAdminNoteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A AdminnotesAdminNoteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># admin_note_id: integer A unique integer value identifying the admin note.</span>
            <span class="n">admin_note_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;admin_note_id&quot;</span><span class="p">]</span>
            <span class="n">admin_note_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">admin_note_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">admin_note_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">adminnote_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">admin_note_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="AdminnotesAdminNoteId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.AdminnotesAdminNoteId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A AdminnotesAdminNoteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># admin_note_id: integer A unique integer value identifying the admin note.</span>
            <span class="n">admin_note_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;admin_note_id&quot;</span><span class="p">]</span>
            <span class="n">admin_note_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">admin_note_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">admin_note_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">adminnote_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">admin_note_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Clients"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Clients">[docs]</a><span class="k">class</span> <span class="nc">Clients</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;_post_logout_redirect_uris&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;New-line delimited list of post-logout redirect URIs&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;_redirect_uris&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;New-line delimited list of redirect URIs&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;client_id&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;model&quot;: null</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;contact_email&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;logo&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;require_consent&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;If disabled, the Server will NEVER ask the user for consent.&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;response_type&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;reuse_consent&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;If enabled, the Server will save the user consent given to a specific client, so that user will not be prompted for the same authorization multiple times.&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;terms_url&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;External reference to the privacy policy of the client.&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;website_url&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;client_id&quot;,</span>
<span class="s2">            &quot;response_type&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Clients.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Clients.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Clients instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># client_ids (optional): array An optional list of client ids</span>
            <span class="n">client_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">client_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">client_ids</span> <span class="o">=</span> <span class="n">client_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">client_ids</span><span class="p">:</span>
                <span class="n">client_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">client_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">client_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">client_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;client_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">client_ids</span>
            <span class="c1"># client_token_id (optional): string An optional client id to filter on. This is not the primary key.</span>
            <span class="n">client_token_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_token_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">client_token_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">client_token_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;client_token_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">client_token_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">client_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ClientsClientId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.ClientsClientId">[docs]</a><span class="k">class</span> <span class="nc">ClientsClientId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">client</span>

<div class="viewcode-block" id="ClientsClientId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.ClientsClientId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A ClientsClientId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># client_id: integer A integer identifying the client</span>
            <span class="n">client_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;client_id&quot;</span><span class="p">]</span>
            <span class="n">client_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">client_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">client_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">client_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Countries"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Countries">[docs]</a><span class="k">class</span> <span class="nc">Countries</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;code&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 2,</span>
<span class="s2">                &quot;minLength&quot;: 2,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;code&quot;,</span>
<span class="s2">            &quot;name&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Countries.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Countries.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Countries instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># country_codes (optional): array An optional list of country codes</span>
            <span class="n">country_codes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;country_codes&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">country_codes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">country_codes</span> <span class="o">=</span> <span class="n">country_codes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">country_codes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;maxLength&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">country_codes</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;country_codes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">country_codes</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">country_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CountriesCountryCode"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.CountriesCountryCode">[docs]</a><span class="k">class</span> <span class="nc">CountriesCountryCode</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">country</span>

<div class="viewcode-block" id="CountriesCountryCode.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.CountriesCountryCode.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A CountriesCountryCode instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># country_code: string A unique two-character value identifying the country.</span>
            <span class="n">country_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;country_code&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;maxLength&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">country_code</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">country_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">country_code</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Deletedusers"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Deletedusers">[docs]</a><span class="k">class</span> <span class="nc">Deletedusers</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deleted_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deleter_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;email&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;msisdn&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;reason&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;username&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;username&quot;,</span>
<span class="s2">            &quot;reason&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;,</span>
<span class="s2">            &quot;deleter_id&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_create</span>

<div class="viewcode-block" id="Deletedusers.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Deletedusers.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Deletedusers instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># deleter_id (optional): string An optional query parameter to filter by deleter_id</span>
            <span class="n">deleter_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;deleter_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">deleter_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">deleter_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;deleter_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">deleter_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deleteduser_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Deletedusers.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Deletedusers.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Deletedusers instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deleteduser_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DeletedusersUserId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersUserId">[docs]</a><span class="k">class</span> <span class="nc">DeletedusersUserId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_update</span>

<div class="viewcode-block" id="DeletedusersUserId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersUserId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DeletedusersUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deleteduser_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="DeletedusersUserId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersUserId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DeletedusersUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deleteduser_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="DeletedusersUserId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersUserId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DeletedusersUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deleteduser_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Deletedusersites"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Deletedusersites">[docs]</a><span class="k">class</span> <span class="nc">Deletedusersites</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deleted_user_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;deleted_user&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deletion_confirmed_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deletion_confirmed_via&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deletion_requested_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;deletion_requested_via&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;site_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;site&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;deleted_user_id&quot;,</span>
<span class="s2">            &quot;site_id&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_site</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_site_create</span>

<div class="viewcode-block" id="Deletedusersites.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Deletedusersites.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Deletedusersites instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># user_id (optional): string An optional query parameter to filter by user_id</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deletedusersite_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Deletedusersites.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Deletedusersites.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Deletedusersites instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deletedusersite_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DeletedusersitesUserIdSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersitesUserIdSiteId">[docs]</a><span class="k">class</span> <span class="nc">DeletedusersitesUserIdSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_site</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_site</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">deleted_user_site_update</span>

<div class="viewcode-block" id="DeletedusersitesUserIdSiteId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersitesUserIdSiteId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DeletedusersitesUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deletedusersite_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="DeletedusersitesUserIdSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersitesUserIdSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DeletedusersitesUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deletedusersite_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="DeletedusersitesUserIdSiteId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DeletedusersitesUserIdSiteId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DeletedusersitesUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">deletedusersite_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Domainroles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Domainroles">[docs]</a><span class="k">class</span> <span class="nc">Domainroles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;domain_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;grant_implicitly&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;domain_id&quot;,</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;grant_implicitly&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_role_create</span>

<div class="viewcode-block" id="Domainroles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Domainroles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Domainroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># domain_id (optional): integer An optional query parameter to filter by domain_id</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;domain_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">domain_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain_id</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domainrole_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Domainroles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Domainroles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Domainroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domainrole_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DomainrolesDomainIdRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainrolesDomainIdRoleId">[docs]</a><span class="k">class</span> <span class="nc">DomainrolesDomainIdRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_role</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_role</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_role_update</span>

<div class="viewcode-block" id="DomainrolesDomainIdRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainrolesDomainIdRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DomainrolesDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domainrole_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="DomainrolesDomainIdRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainrolesDomainIdRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DomainrolesDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domainrole_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="DomainrolesDomainIdRoleId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainrolesDomainIdRoleId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DomainrolesDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domainrole_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Domains"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Domains">[docs]</a><span class="k">class</span> <span class="nc">Domains</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parent_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;domain&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;name&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_create</span>

<div class="viewcode-block" id="Domains.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Domains.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Domains instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># parent_id (optional): integer An optional query parameter to filter by parent_id</span>
            <span class="n">parent_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parent_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parent_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parent_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">parent_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;parent_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent_id</span>
            <span class="c1"># domain_ids (optional): array An optional list of domain ids</span>
            <span class="n">domain_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;domain_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">domain_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">domain_ids</span> <span class="o">=</span> <span class="n">domain_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">domain_ids</span><span class="p">:</span>
                <span class="n">domain_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">domain_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">domain_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;domain_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domain_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Domains.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Domains.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Domains instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domain_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DomainsDomainId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainsDomainId">[docs]</a><span class="k">class</span> <span class="nc">DomainsDomainId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_update</span>

<div class="viewcode-block" id="DomainsDomainId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainsDomainId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DomainsDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domain_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="DomainsDomainId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainsDomainId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DomainsDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domain_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="DomainsDomainId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.DomainsDomainId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A DomainsDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">domain_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Healthcheck"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Healthcheck">[docs]</a><span class="k">class</span> <span class="nc">Healthcheck</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">health_info</span>

<div class="viewcode-block" id="Healthcheck.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Healthcheck.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Healthcheck instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">healthcheck</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Invitationdomainroles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitationdomainroles">[docs]</a><span class="k">class</span> <span class="nc">Invitationdomainroles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;domain_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;invitation_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;email&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;invitation_id&quot;,</span>
<span class="s2">            &quot;domain_id&quot;,</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_domain_role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_domain_role_create</span>

<div class="viewcode-block" id="Invitationdomainroles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitationdomainroles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Invitationdomainroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># invitation_id (optional): string An optional query parameter to filter by invitation_id</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invitation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">invitation_id</span>
            <span class="c1"># domain_id (optional): integer An optional query parameter to filter by domain_id</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;domain_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">domain_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain_id</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationdomainrole_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Invitationdomainroles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitationdomainroles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Invitationdomainroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationdomainrole_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="InvitationdomainrolesInvitationIdDomainIdRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationdomainrolesInvitationIdDomainIdRoleId">[docs]</a><span class="k">class</span> <span class="nc">InvitationdomainrolesInvitationIdDomainIdRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_domain_role</span>

<div class="viewcode-block" id="InvitationdomainrolesInvitationIdDomainIdRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationdomainrolesInvitationIdDomainIdRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationdomainrolesInvitationIdDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationdomainrole_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="InvitationdomainrolesInvitationIdDomainIdRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationdomainrolesInvitationIdDomainIdRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationdomainrolesInvitationIdDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationdomainrole_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Invitations"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitations">[docs]</a><span class="k">class</span> <span class="nc">Invitations</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;email&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;expires_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;first_name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;invitor_id&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;The user that created the invitation&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;user&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;last_name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;organisation_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;organisation&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;invitor_id&quot;,</span>
<span class="s2">            &quot;first_name&quot;,</span>
<span class="s2">            &quot;last_name&quot;,</span>
<span class="s2">            &quot;email&quot;,</span>
<span class="s2">            &quot;organisation_id&quot;,</span>
<span class="s2">            &quot;expires_at&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_create</span>

<div class="viewcode-block" id="Invitations.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitations.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Invitations instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># invitor_id (optional): string Optional filter based on the invitor (the user who created the invitation)</span>
            <span class="n">invitor_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;invitor_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invitor_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitor_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;invitor_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">invitor_id</span>
            <span class="c1"># invitation_ids (optional): array An optional list of invitation ids</span>
            <span class="n">invitation_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;invitation_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invitation_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">invitation_ids</span> <span class="o">=</span> <span class="n">invitation_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invitation_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;invitation_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">invitation_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitation_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Invitations.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitations.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Invitations instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitation_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="InvitationsInvitationId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsInvitationId">[docs]</a><span class="k">class</span> <span class="nc">InvitationsInvitationId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_update</span>

<div class="viewcode-block" id="InvitationsInvitationId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsInvitationId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsInvitationId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitation_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="InvitationsInvitationId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsInvitationId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsInvitationId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitation_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="InvitationsInvitationId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsInvitationId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsInvitationId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitation_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="InvitationsInvitationIdSend"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsInvitationIdSend">[docs]</a><span class="k">class</span> <span class="nc">InvitationsInvitationIdSend</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="InvitationsInvitationIdSend.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsInvitationIdSend.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsInvitationIdSend instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string </span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># language (optional): string </span>
            <span class="n">language</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">language</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="s1">&#39;en&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">language</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">language</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitation_send</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="InvitationsPurgeExpired"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsPurgeExpired">[docs]</a><span class="k">class</span> <span class="nc">InvitationsPurgeExpired</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">purged_invitations</span>

<div class="viewcode-block" id="InvitationsPurgeExpired.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsPurgeExpired.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsPurgeExpired instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># synchronous_mode (optional): boolean Change the mode of the call to synchronous.</span>
            <span class="n">synchronous_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;synchronous_mode&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">synchronous_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">synchronous_mode</span> <span class="o">=</span> <span class="p">(</span><span class="n">synchronous_mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">synchronous_mode</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;synchronous_mode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">synchronous_mode</span>
            <span class="c1"># cutoff_date (optional): string An optional cutoff date to purge invites before this date</span>
            <span class="n">cutoff_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cutoff_date&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cutoff_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;date&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">cutoff_date</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;cutoff_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cutoff_date</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">purge_expired_invitations</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Invitationsiteroles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitationsiteroles">[docs]</a><span class="k">class</span> <span class="nc">Invitationsiteroles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;invitation_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;email&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;site_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;invitation_id&quot;,</span>
<span class="s2">            &quot;site_id&quot;,</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_site_role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_site_role_create</span>

<div class="viewcode-block" id="Invitationsiteroles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitationsiteroles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Invitationsiteroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># invitation_id (optional): string An optional query parameter to filter by invitation_id</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invitation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">invitation_id</span>
            <span class="c1"># site_id (optional): integer An optional query parameter to filter by site_id</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_id</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationsiterole_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Invitationsiteroles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Invitationsiteroles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Invitationsiteroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationsiterole_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="InvitationsiterolesInvitationIdSiteIdRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsiterolesInvitationIdSiteIdRoleId">[docs]</a><span class="k">class</span> <span class="nc">InvitationsiterolesInvitationIdSiteIdRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">invitation_site_role</span>

<div class="viewcode-block" id="InvitationsiterolesInvitationIdSiteIdRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsiterolesInvitationIdSiteIdRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsiterolesInvitationIdSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationsiterole_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="InvitationsiterolesInvitationIdSiteIdRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.InvitationsiterolesInvitationIdSiteIdRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A InvitationsiterolesInvitationIdSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># invitation_id: string A UUID value identifying the invitation.</span>
            <span class="n">invitation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;invitation_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">invitation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">invitationsiterole_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">invitation_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsAllUserRolesUserId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsAllUserRolesUserId">[docs]</a><span class="k">class</span> <span class="nc">OpsAllUserRolesUserId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">all_user_roles</span>

<div class="viewcode-block" id="OpsAllUserRolesUserId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsAllUserRolesUserId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsAllUserRolesUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_all_user_roles</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsDomainRolesDomainId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsDomainRolesDomainId">[docs]</a><span class="k">class</span> <span class="nc">OpsDomainRolesDomainId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">domain_roles</span>

<div class="viewcode-block" id="OpsDomainRolesDomainId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsDomainRolesDomainId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsDomainRolesDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_domain_roles</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsGetSiteFromClientTokenIdClientTokenId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsGetSiteFromClientTokenIdClientTokenId">[docs]</a><span class="k">class</span> <span class="nc">OpsGetSiteFromClientTokenIdClientTokenId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site</span>

<div class="viewcode-block" id="OpsGetSiteFromClientTokenIdClientTokenId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsGetSiteFromClientTokenIdClientTokenId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsGetSiteFromClientTokenIdClientTokenId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># client_token_id: string A client token id. This is not the primary key of the client table, but rather the client id that is typically configured along with the client secret.</span>
            <span class="n">client_token_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;client_token_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">client_token_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_site_from_client_token_id</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">client_token_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsGetSitesUnderDomainDomainId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsGetSitesUnderDomainDomainId">[docs]</a><span class="k">class</span> <span class="nc">OpsGetSitesUnderDomainDomainId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;client_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;domain_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;is_active&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;domain_id&quot;,</span>
<span class="s2">            &quot;name&quot;,</span>
<span class="s2">            &quot;is_active&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="OpsGetSitesUnderDomainDomainId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsGetSitesUnderDomainDomainId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsGetSitesUnderDomainDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_sites_under_domain</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsSiteAndDomainRolesSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsSiteAndDomainRolesSiteId">[docs]</a><span class="k">class</span> <span class="nc">OpsSiteAndDomainRolesSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_and_domain_roles</span>

<div class="viewcode-block" id="OpsSiteAndDomainRolesSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsSiteAndDomainRolesSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsSiteAndDomainRolesSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_site_and_domain_roles</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsSiteRoleLabelsAggregatedSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsSiteRoleLabelsAggregatedSiteId">[docs]</a><span class="k">class</span> <span class="nc">OpsSiteRoleLabelsAggregatedSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_role_labels_aggregated</span>

<div class="viewcode-block" id="OpsSiteRoleLabelsAggregatedSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsSiteRoleLabelsAggregatedSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsSiteRoleLabelsAggregatedSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_site_role_labels_aggregated</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUserDomainPermissionsUserIdDomainId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserDomainPermissionsUserIdDomainId">[docs]</a><span class="k">class</span> <span class="nc">OpsUserDomainPermissionsUserIdDomainId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">    &quot;uniqueItems&quot;: true</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="OpsUserDomainPermissionsUserIdDomainId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserDomainPermissionsUserIdDomainId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUserDomainPermissionsUserIdDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_user_domain_permissions</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUserHasPermissionsUserId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserHasPermissionsUserId">[docs]</a><span class="k">class</span> <span class="nc">OpsUserHasPermissionsUserId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_permissions_check_response</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_permissions_check</span>

<div class="viewcode-block" id="OpsUserHasPermissionsUserId.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserHasPermissionsUserId.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUserHasPermissionsUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">user_has_permissions</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUserManagementPortalPermissionsUserId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserManagementPortalPermissionsUserId">[docs]</a><span class="k">class</span> <span class="nc">OpsUserManagementPortalPermissionsUserId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">    &quot;uniqueItems&quot;: true</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="OpsUserManagementPortalPermissionsUserId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserManagementPortalPermissionsUserId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUserManagementPortalPermissionsUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_user_management_portal_permissions</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUserSitePermissionsUserIdSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserSitePermissionsUserIdSiteId">[docs]</a><span class="k">class</span> <span class="nc">OpsUserSitePermissionsUserIdSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">    &quot;uniqueItems&quot;: true</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="OpsUserSitePermissionsUserIdSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserSitePermissionsUserIdSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUserSitePermissionsUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_user_site_permissions</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUserSiteRoleLabelsAggregatedUserIdSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserSiteRoleLabelsAggregatedUserIdSiteId">[docs]</a><span class="k">class</span> <span class="nc">OpsUserSiteRoleLabelsAggregatedUserIdSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_role_labels_aggregated</span>

<div class="viewcode-block" id="OpsUserSiteRoleLabelsAggregatedUserIdSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUserSiteRoleLabelsAggregatedUserIdSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUserSiteRoleLabelsAggregatedUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_user_site_role_labels_aggregated</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUsersWithRolesForDomainDomainId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUsersWithRolesForDomainDomainId">[docs]</a><span class="k">class</span> <span class="nc">OpsUsersWithRolesForDomainDomainId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;description&quot;: &quot;A user with their roles.&quot;,</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;roles&quot;: {</span>
<span class="s2">                &quot;items&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;username&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="OpsUsersWithRolesForDomainDomainId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUsersWithRolesForDomainDomainId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUsersWithRolesForDomainDomainId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_users_with_roles_for_domain</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OpsUsersWithRolesForSiteSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUsersWithRolesForSiteSiteId">[docs]</a><span class="k">class</span> <span class="nc">OpsUsersWithRolesForSiteSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;description&quot;: &quot;A user with their roles.&quot;,</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;roles&quot;: {</span>
<span class="s2">                &quot;items&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;username&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="OpsUsersWithRolesForSiteSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OpsUsersWithRolesForSiteSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OpsUsersWithRolesForSiteSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">get_users_with_roles_for_site</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Organisations"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Organisations">[docs]</a><span class="k">class</span> <span class="nc">Organisations</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;name&quot;,</span>
<span class="s2">            &quot;description&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">organisation</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">organisation_create</span>

<div class="viewcode-block" id="Organisations.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Organisations.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Organisations instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># organisation_ids (optional): array An optional list of organisation ids</span>
            <span class="n">organisation_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;organisation_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">organisation_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">organisation_ids</span> <span class="o">=</span> <span class="n">organisation_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">organisation_ids</span><span class="p">:</span>
                <span class="n">organisation_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">organisation_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">organisation_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">organisation_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;organisation_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">organisation_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">organisation_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Organisations.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Organisations.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Organisations instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">organisation_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OrganisationsOrganisationId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OrganisationsOrganisationId">[docs]</a><span class="k">class</span> <span class="nc">OrganisationsOrganisationId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">organisation</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">organisation</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">organisation_update</span>

<div class="viewcode-block" id="OrganisationsOrganisationId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OrganisationsOrganisationId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OrganisationsOrganisationId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># organisation_id: integer An integer identifying an organisation</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;organisation_id&quot;</span><span class="p">]</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">organisation_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">organisation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="OrganisationsOrganisationId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OrganisationsOrganisationId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OrganisationsOrganisationId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># organisation_id: integer An integer identifying an organisation</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;organisation_id&quot;</span><span class="p">]</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">organisation_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">organisation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="OrganisationsOrganisationId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.OrganisationsOrganisationId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A OrganisationsOrganisationId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># organisation_id: integer An integer identifying an organisation</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;organisation_id&quot;</span><span class="p">]</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">organisation_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">organisation_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Permissions"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Permissions">[docs]</a><span class="k">class</span> <span class="nc">Permissions</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 50,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;name&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">permission</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">permission_create</span>

<div class="viewcode-block" id="Permissions.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Permissions.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Permissions instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># permission_ids (optional): array An optional list of permission ids</span>
            <span class="n">permission_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;permission_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">permission_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">permission_ids</span> <span class="o">=</span> <span class="n">permission_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">permission_ids</span><span class="p">:</span>
                <span class="n">permission_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">permission_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">permission_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;permission_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">permission_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">permission_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Permissions.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Permissions.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Permissions instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">permission_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PermissionsPermissionId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.PermissionsPermissionId">[docs]</a><span class="k">class</span> <span class="nc">PermissionsPermissionId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">permission</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">permission</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">permission_update</span>

<div class="viewcode-block" id="PermissionsPermissionId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.PermissionsPermissionId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A PermissionsPermissionId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># permission_id: integer A unique integer value identifying the permission.</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;permission_id&quot;</span><span class="p">]</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permission_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">permission_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">permission_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="PermissionsPermissionId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.PermissionsPermissionId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A PermissionsPermissionId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># permission_id: integer A unique integer value identifying the permission.</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;permission_id&quot;</span><span class="p">]</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permission_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">permission_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">permission_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="PermissionsPermissionId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.PermissionsPermissionId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A PermissionsPermissionId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># permission_id: integer A unique integer value identifying the permission.</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;permission_id&quot;</span><span class="p">]</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permission_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">permission_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">permission_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshAll"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshAll">[docs]</a><span class="k">class</span> <span class="nc">RefreshAll</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshAll.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshAll.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshAll instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_all</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshClients"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshClients">[docs]</a><span class="k">class</span> <span class="nc">RefreshClients</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshClients.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshClients.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshClients instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_clients</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshDomains"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshDomains">[docs]</a><span class="k">class</span> <span class="nc">RefreshDomains</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshDomains.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshDomains.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshDomains instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_domains</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshKeys"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshKeys">[docs]</a><span class="k">class</span> <span class="nc">RefreshKeys</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshKeys.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshKeys.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshKeys instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_keys</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshPermissions"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshPermissions">[docs]</a><span class="k">class</span> <span class="nc">RefreshPermissions</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshPermissions.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshPermissions.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshPermissions instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_permissions</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshResources"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshResources">[docs]</a><span class="k">class</span> <span class="nc">RefreshResources</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshResources.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshResources.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshResources instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_resources</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshRoles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshRoles">[docs]</a><span class="k">class</span> <span class="nc">RefreshRoles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshRoles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshRoles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshRoles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_roles</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RefreshSites"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshSites">[docs]</a><span class="k">class</span> <span class="nc">RefreshSites</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>

<div class="viewcode-block" id="RefreshSites.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RefreshSites.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RefreshSites instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># nocache (optional): boolean An optional query parameter to instructing an API call to by pass caches when reading data.</span>
            <span class="n">nocache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nocache&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nocache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nocache</span> <span class="o">=</span> <span class="p">(</span><span class="n">nocache</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nocache</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nocache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nocache</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">refresh_sites</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RequestUserDeletion"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RequestUserDeletion">[docs]</a><span class="k">class</span> <span class="nc">RequestUserDeletion</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">request_user_deletion</span>

<div class="viewcode-block" id="RequestUserDeletion.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RequestUserDeletion.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RequestUserDeletion instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">request_user_deletion</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Resources"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Resources">[docs]</a><span class="k">class</span> <span class="nc">Resources</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;urn&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;urn&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">resource</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">resource_create</span>

<div class="viewcode-block" id="Resources.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Resources.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Resources instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># prefix (optional): string An optional URN prefix filter</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prefix&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;prefix&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span>
            <span class="c1"># resource_ids (optional): array An optional list of resource ids</span>
            <span class="n">resource_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;resource_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resource_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">resource_ids</span> <span class="o">=</span> <span class="n">resource_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resource_ids</span><span class="p">:</span>
                <span class="n">resource_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">resource_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">resource_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;resource_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resource_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">resource_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Resources.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Resources.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Resources instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">resource_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ResourcesResourceId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.ResourcesResourceId">[docs]</a><span class="k">class</span> <span class="nc">ResourcesResourceId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">resource</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">resource</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">resource_update</span>

<div class="viewcode-block" id="ResourcesResourceId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.ResourcesResourceId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A ResourcesResourceId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># resource_id: integer A unique integer value identifying the resource.</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;resource_id&quot;</span><span class="p">]</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">resource_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="ResourcesResourceId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.ResourcesResourceId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A ResourcesResourceId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># resource_id: integer A unique integer value identifying the resource.</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;resource_id&quot;</span><span class="p">]</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">resource_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourcesResourceId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.ResourcesResourceId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A ResourcesResourceId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># resource_id: integer A unique integer value identifying the resource.</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;resource_id&quot;</span><span class="p">]</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">resource_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Roleresourcepermissions"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Roleresourcepermissions">[docs]</a><span class="k">class</span> <span class="nc">Roleresourcepermissions</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;permission_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;resource_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;urn&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;resource_id&quot;,</span>
<span class="s2">            &quot;permission_id&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role_resource_permission</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role_resource_permission_create</span>

<div class="viewcode-block" id="Roleresourcepermissions.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Roleresourcepermissions.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Roleresourcepermissions instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
            <span class="c1"># resource_id (optional): integer An optional resource filter</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;resource_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;resource_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resource_id</span>
            <span class="c1"># permission_id (optional): integer An optional permission filter</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;permission_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">permission_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">permission_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permission_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;permission_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">permission_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">roleresourcepermission_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Roleresourcepermissions.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Roleresourcepermissions.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Roleresourcepermissions instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">roleresourcepermission_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RoleresourcepermissionsRoleIdResourceIdPermissionId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RoleresourcepermissionsRoleIdResourceIdPermissionId">[docs]</a><span class="k">class</span> <span class="nc">RoleresourcepermissionsRoleIdResourceIdPermissionId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role_resource_permission</span>

<div class="viewcode-block" id="RoleresourcepermissionsRoleIdResourceIdPermissionId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RoleresourcepermissionsRoleIdResourceIdPermissionId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RoleresourcepermissionsRoleIdResourceIdPermissionId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># resource_id: integer A unique integer value identifying the resource.</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;resource_id&quot;</span><span class="p">]</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># permission_id: integer A unique integer value identifying the permission.</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;permission_id&quot;</span><span class="p">]</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permission_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">roleresourcepermission_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">,</span> <span class="n">permission_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="RoleresourcepermissionsRoleIdResourceIdPermissionId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RoleresourcepermissionsRoleIdResourceIdPermissionId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RoleresourcepermissionsRoleIdResourceIdPermissionId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># resource_id: integer A unique integer value identifying the resource.</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;resource_id&quot;</span><span class="p">]</span>
            <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># permission_id: integer A unique integer value identifying the permission.</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;permission_id&quot;</span><span class="p">]</span>
            <span class="n">permission_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permission_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">permission_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">roleresourcepermission_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">,</span> <span class="n">permission_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Roles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Roles">[docs]</a><span class="k">class</span> <span class="nc">Roles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;label&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-scope&quot;: [</span>
<span class="s2">                    &quot;&quot;,</span>
<span class="s2">                    &quot;#/definitions/role&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;requires_2fa&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;label&quot;,</span>
<span class="s2">            &quot;requires_2fa&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role_create</span>

<div class="viewcode-block" id="Roles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Roles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Roles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># role_ids (optional): array An optional list of role ids</span>
            <span class="n">role_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_ids</span> <span class="o">=</span> <span class="n">role_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_ids</span><span class="p">:</span>
                <span class="n">role_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">role_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">role_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">role_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Roles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Roles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Roles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">role_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RolesRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RolesRoleId">[docs]</a><span class="k">class</span> <span class="nc">RolesRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">role_update</span>

<div class="viewcode-block" id="RolesRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RolesRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RolesRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">role_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="RolesRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RolesRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RolesRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">role_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="RolesRoleId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.RolesRoleId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A RolesRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">role_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Sitedataschemas"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Sitedataschemas">[docs]</a><span class="k">class</span> <span class="nc">Sitedataschemas</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;schema&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;site_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;site_id&quot;,</span>
<span class="s2">            &quot;schema&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_data_schema</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_data_schema_create</span>

<div class="viewcode-block" id="Sitedataschemas.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Sitedataschemas.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Sitedataschemas instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># site_ids (optional): array An optional list of site ids</span>
            <span class="n">site_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_ids</span> <span class="o">=</span> <span class="n">site_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_ids</span><span class="p">:</span>
                <span class="n">site_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">site_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">site_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">sitedataschema_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sitedataschemas.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Sitedataschemas.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Sitedataschemas instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">sitedataschema_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SitedataschemasSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitedataschemasSiteId">[docs]</a><span class="k">class</span> <span class="nc">SitedataschemasSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_data_schema</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_data_schema</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_data_schema_update</span>

<div class="viewcode-block" id="SitedataschemasSiteId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitedataschemasSiteId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SitedataschemasSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">sitedataschema_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="SitedataschemasSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitedataschemasSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SitedataschemasSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">sitedataschema_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="SitedataschemasSiteId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitedataschemasSiteId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SitedataschemasSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">sitedataschema_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Siteroles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Siteroles">[docs]</a><span class="k">class</span> <span class="nc">Siteroles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;grant_implicitly&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;site_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;site_id&quot;,</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;grant_implicitly&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_role_create</span>

<div class="viewcode-block" id="Siteroles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Siteroles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Siteroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># site_id (optional): integer An optional query parameter to filter by site_id</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_id</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">siterole_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Siteroles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Siteroles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Siteroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">siterole_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SiterolesSiteIdRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SiterolesSiteIdRoleId">[docs]</a><span class="k">class</span> <span class="nc">SiterolesSiteIdRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_role</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_role</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_role_update</span>

<div class="viewcode-block" id="SiterolesSiteIdRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SiterolesSiteIdRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SiterolesSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">siterole_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="SiterolesSiteIdRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SiterolesSiteIdRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SiterolesSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">siterole_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="SiterolesSiteIdRoleId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SiterolesSiteIdRoleId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SiterolesSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">siterole_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Sites"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Sites">[docs]</a><span class="k">class</span> <span class="nc">Sites</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;client_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;description&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;domain_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;is_active&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;name&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 100,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;domain_id&quot;,</span>
<span class="s2">            &quot;name&quot;,</span>
<span class="s2">            &quot;is_active&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_create</span>

<div class="viewcode-block" id="Sites.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Sites.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Sites instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># site_ids (optional): array An optional list of site ids</span>
            <span class="n">site_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_ids</span> <span class="o">=</span> <span class="n">site_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_ids</span><span class="p">:</span>
                <span class="n">site_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">site_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">site_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_ids</span>
            <span class="c1"># client_id (optional): integer An optional client id to filter on</span>
            <span class="n">client_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">client_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">client_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">client_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;client_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">client_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">site_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sites.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Sites.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Sites instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">site_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SitesSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitesSiteId">[docs]</a><span class="k">class</span> <span class="nc">SitesSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">site_update</span>

<div class="viewcode-block" id="SitesSiteId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitesSiteId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SitesSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">site_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="SitesSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitesSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SitesSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">site_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="SitesSiteId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.SitesSiteId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A SitesSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">site_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Userdomainroles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Userdomainroles">[docs]</a><span class="k">class</span> <span class="nc">Userdomainroles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;domain_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;user_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                }</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;user_id&quot;,</span>
<span class="s2">            &quot;domain_id&quot;,</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_domain_role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_domain_role_create</span>

<div class="viewcode-block" id="Userdomainroles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Userdomainroles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Userdomainroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># user_id (optional): string An optional query parameter to filter by user_id</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
            <span class="c1"># domain_id (optional): integer An optional query parameter to filter by domain_id</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;domain_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">domain_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain_id</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">userdomainrole_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Userdomainroles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Userdomainroles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Userdomainroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">userdomainrole_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="UserdomainrolesUserIdDomainIdRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UserdomainrolesUserIdDomainIdRoleId">[docs]</a><span class="k">class</span> <span class="nc">UserdomainrolesUserIdDomainIdRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_domain_role</span>

<div class="viewcode-block" id="UserdomainrolesUserIdDomainIdRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UserdomainrolesUserIdDomainIdRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UserdomainrolesUserIdDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">userdomainrole_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="UserdomainrolesUserIdDomainIdRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UserdomainrolesUserIdDomainIdRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UserdomainrolesUserIdDomainIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># domain_id: integer A unique integer value identifying the domain.</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;domain_id&quot;</span><span class="p">]</span>
            <span class="n">domain_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">domain_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">userdomainrole_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">domain_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Users"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Users">[docs]</a><span class="k">class</span> <span class="nc">Users</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;avatar&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;birth_date&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;country_code&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 2,</span>
<span class="s2">                &quot;minLength&quot;: 2,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;field&quot;: &quot;code&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;country&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;date_joined&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;email&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;email_verified&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;first_name&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;gender&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;id&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;The UUID of the user&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;is_active&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Designates whether this user should be treated as active. Deselect this instead of deleting accounts.&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;last_login&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;last_name&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;msisdn&quot;: {</span>
<span class="s2">                &quot;maxLength&quot;: 15,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;msisdn_verified&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;organisation_id&quot;: {</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;organisation&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;username&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;id&quot;,</span>
<span class="s2">            &quot;username&quot;,</span>
<span class="s2">            &quot;is_active&quot;,</span>
<span class="s2">            &quot;date_joined&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Users.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Users.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Users instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># birth_date (optional): string An optional birth_date range filter</span>
            <span class="n">birth_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;birth_date&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">birth_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">birth_date</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;birth_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">birth_date</span>
            <span class="c1"># country (optional): string An optional country filter</span>
            <span class="n">country</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">country</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;maxLength&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">country</span>
            <span class="c1"># date_joined (optional): string An optional date joined range filter</span>
            <span class="n">date_joined</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;date_joined&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">date_joined</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">date_joined</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;date_joined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">date_joined</span>
            <span class="c1"># email (optional): string An optional case insensitive email inner match filter</span>
            <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">email</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email</span>
            <span class="c1"># email_verified (optional): boolean An optional email verified filter</span>
            <span class="n">email_verified</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;email_verified&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">email_verified</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">email_verified</span> <span class="o">=</span> <span class="p">(</span><span class="n">email_verified</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">email_verified</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;email_verified&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email_verified</span>
            <span class="c1"># first_name (optional): string An optional case insensitive first name inner match filter</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">first_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;first_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_name</span>
            <span class="c1"># gender (optional): string An optional gender filter</span>
            <span class="n">gender</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gender&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">gender</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">gender</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;gender&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gender</span>
            <span class="c1"># is_active (optional): boolean An optional is_active filter</span>
            <span class="n">is_active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_active&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_active</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">is_active</span> <span class="o">=</span> <span class="p">(</span><span class="n">is_active</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">is_active</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;is_active&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_active</span>
            <span class="c1"># last_login (optional): string An optional last login range filter</span>
            <span class="n">last_login</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_login&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last_login</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">last_login</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;last_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_login</span>
            <span class="c1"># last_name (optional): string An optional case insensitive last name inner match filter</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;last_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_name</span>
            <span class="c1"># msisdn (optional): string An optional case insensitive MSISDN inner match filter</span>
            <span class="n">msisdn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;msisdn&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">msisdn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">msisdn</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;msisdn&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">msisdn</span>
            <span class="c1"># msisdn_verified (optional): boolean An optional MSISDN verified filter</span>
            <span class="n">msisdn_verified</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;msisdn_verified&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">msisdn_verified</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">msisdn_verified</span> <span class="o">=</span> <span class="p">(</span><span class="n">msisdn_verified</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">msisdn_verified</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;msisdn_verified&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">msisdn_verified</span>
            <span class="c1"># nickname (optional): string An optional case insensitive nickname inner match filter</span>
            <span class="n">nickname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nickname&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nickname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">nickname</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;nickname&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nickname</span>
            <span class="c1"># organisation_id (optional): integer An optional filter on the organisation id</span>
            <span class="n">organisation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;organisation_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">organisation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">organisation_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">organisation_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;organisation_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">organisation_id</span>
            <span class="c1"># updated_at (optional): string An optional updated_at range filter</span>
            <span class="n">updated_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;updated_at&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">updated_at</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">updated_at</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;updated_at&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_at</span>
            <span class="c1"># username (optional): string An optional case insensitive username inner match filter</span>
            <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">username</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">username</span>
            <span class="c1"># q (optional): string An optional case insensitive inner match filter across all searchable text fields</span>
            <span class="n">q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">q</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;minLength&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;q&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">q</span>
            <span class="c1"># tfa_enabled (optional): boolean An optional filter based on whether a user has 2FA enabled or not</span>
            <span class="n">tfa_enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tfa_enabled&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tfa_enabled</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">tfa_enabled</span> <span class="o">=</span> <span class="p">(</span><span class="n">tfa_enabled</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">tfa_enabled</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;tfa_enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tfa_enabled</span>
            <span class="c1"># has_organisation (optional): boolean An optional filter based on whether a user belongs to an organisation or not</span>
            <span class="n">has_organisation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;has_organisation&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">has_organisation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">has_organisation</span> <span class="o">=</span> <span class="p">(</span><span class="n">has_organisation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">has_organisation</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;has_organisation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">has_organisation</span>
            <span class="c1"># order_by (optional): array Fields and directions to order by, e.g. &quot;-created_at,username&quot;. Add &quot;-&quot; in front of a field name to indicate descending order.</span>
            <span class="n">order_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;order_by&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">order_by</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">order_by</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">order_by</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">order_by</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;order_by&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_by</span>
            <span class="c1"># user_ids (optional): array An optional list of user ids</span>
            <span class="n">user_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">user_ids</span> <span class="o">=</span> <span class="n">user_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;user_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_ids</span>
            <span class="c1"># site_ids (optional): array An optional list of site ids</span>
            <span class="n">site_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_ids&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_ids</span> <span class="o">=</span> <span class="n">site_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_ids</span><span class="p">:</span>
                <span class="n">site_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">site_ids</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">site_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">},</span> <span class="s1">&#39;minItems&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;uniqueItems&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_ids</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_ids&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_ids</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">user_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="UsersUserId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersUserId">[docs]</a><span class="k">class</span> <span class="nc">UsersUserId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_update</span>

<div class="viewcode-block" id="UsersUserId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersUserId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">user_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="UsersUserId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersUserId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">user_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="UsersUserId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersUserId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersUserId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">user_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Usersitedata"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Usersitedata">[docs]</a><span class="k">class</span> <span class="nc">Usersitedata</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;data&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;site_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;user_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                }</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;user_id&quot;,</span>
<span class="s2">            &quot;site_id&quot;,</span>
<span class="s2">            &quot;data&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_data</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_data_create</span>

<div class="viewcode-block" id="Usersitedata.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Usersitedata.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Usersitedata instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># user_id (optional): string An optional query parameter to filter by user_id</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
            <span class="c1"># site_id (optional): integer An optional query parameter to filter by site_id</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersitedata_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Usersitedata.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Usersitedata.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Usersitedata instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersitedata_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="UsersitedataUserIdSiteId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersitedataUserIdSiteId">[docs]</a><span class="k">class</span> <span class="nc">UsersitedataUserIdSiteId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_data</span>
    <span class="n">PUT_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_data</span>
    <span class="n">PUT_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_data_update</span>

<div class="viewcode-block" id="UsersitedataUserIdSiteId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersitedataUserIdSiteId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersitedataUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersitedata_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="UsersitedataUserIdSiteId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersitedataUserIdSiteId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersitedataUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersitedata_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="UsersitedataUserIdSiteId.put"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersitedataUserIdSiteId.put">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersitedataUserIdSiteId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PUT_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersitedata_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PUT_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Usersiteroles"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Usersiteroles">[docs]</a><span class="k">class</span> <span class="nc">Usersiteroles</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;items&quot;: {</span>
<span class="s2">        &quot;properties&quot;: {</span>
<span class="s2">            &quot;created_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;role_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;site_id&quot;: {</span>
<span class="s2">                &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;updated_at&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                &quot;readOnly&quot;: true,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;user_id&quot;: {</span>
<span class="s2">                &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                &quot;x-related-info&quot;: {</span>
<span class="s2">                    &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                }</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;required&quot;: [</span>
<span class="s2">            &quot;user_id&quot;,</span>
<span class="s2">            &quot;site_id&quot;,</span>
<span class="s2">            &quot;role_id&quot;,</span>
<span class="s2">            &quot;created_at&quot;,</span>
<span class="s2">            &quot;updated_at&quot;</span>
<span class="s2">        ],</span>
<span class="s2">        &quot;type&quot;: &quot;object&quot;,</span>
<span class="s2">        &quot;x-scope&quot;: [</span>
<span class="s2">            &quot;&quot;</span>
<span class="s2">        ]</span>
<span class="s2">    },</span>
<span class="s2">    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">POST_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_role</span>
    <span class="n">POST_BODY_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_role_create</span>

<div class="viewcode-block" id="Usersiteroles.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Usersiteroles.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Usersiteroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># offset (optional): integer An optional query parameter specifying the offset in the result set to start from.</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
            <span class="c1"># limit (optional): integer An optional query parameter to limit the number of results returned.</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
            <span class="c1"># user_id (optional): string An optional query parameter to filter by user_id</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
            <span class="c1"># site_id (optional): integer An optional query parameter to filter by site_id</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;site_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">site_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">site_id</span>
            <span class="c1"># role_id (optional): integer An optional query parameter to filter by role_id</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">role_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
                <span class="n">optional_args</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role_id</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersiterole_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Usersiteroles.post"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.Usersiteroles.post">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A Usersiteroles instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body required&quot;</span><span class="p">)</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">POST_BODY_SCHEMA</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Body validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JSON body expected&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersiterole_create</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">POST_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="UsersiterolesUserIdSiteIdRoleId"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersiterolesUserIdSiteIdRoleId">[docs]</a><span class="k">class</span> <span class="nc">UsersiterolesUserIdSiteIdRoleId</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>

    <span class="n">DELETE_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">__UNSPECIFIED__</span>
    <span class="n">GET_RESPONSE_SCHEMA</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">user_site_role</span>

<div class="viewcode-block" id="UsersiterolesUserIdSiteIdRoleId.delete"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersiterolesUserIdSiteIdRoleId.delete">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersiterolesUserIdSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersiterole_delete</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DELETE_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">HTTPNoContent</span><span class="p">()</span></div>

<div class="viewcode-block" id="UsersiterolesUserIdSiteIdRoleId.get"><a class="viewcode-back" href="../../../management_layer.api.html#management_layer.api.views.UsersiterolesUserIdSiteIdRoleId.get">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        No parameters are passed explicitly. We unpack it from the request.</span>
<span class="sd">        :param self: A UsersiterolesUserIdSiteIdRoleId instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># user_id: string A UUID value identifying the user.</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">]</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># site_id: integer A unique integer value identifying the site.</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;site_id&quot;</span><span class="p">]</span>
            <span class="n">site_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">site_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="c1"># role_id: integer A unique integer value identifying the role.</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">match_info</span><span class="p">[</span><span class="s2">&quot;role_id&quot;</span><span class="p">]</span>
            <span class="n">role_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">role_id</span><span class="p">)</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">role_id</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
            <span class="n">optional_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Parameter validation failed: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Stubs</span><span class="o">.</span><span class="n">usersiterole_read</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">site_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="o">**</span><span class="n">optional_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">maybe_validate_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GET_RESPONSE_SCHEMA</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">__SWAGGER_SPEC__</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="n">CorsViewMixin</span><span class="p">):</span>
    <span class="n">SPEC</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    &quot;basePath&quot;: &quot;/api/v1&quot;,</span>
<span class="s2">    &quot;definitions&quot;: {</span>
<span class="s2">        &quot;admin_note&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;creator_id&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;The user making the request will be considered the creator and thus this field is not available when creating admin note.&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;user&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;note&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;creator_id&quot;,</span>
<span class="s2">                &quot;note&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;admin_note_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;note&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;note&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;admin_note_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;note&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;all_user_roles&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An object containing the effective roles that a user has in any place in the organisational tree.&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;roles_map&quot;: {</span>
<span class="s2">                    &quot;additionalProperties&quot;: {</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;description&quot;: &quot;Domain and site roles&quot;,</span>
<span class="s2">                    &quot;example&quot;: {</span>
<span class="s2">                        &quot;d:1&quot;: [</span>
<span class="s2">                            1</span>
<span class="s2">                        ],</span>
<span class="s2">                        &quot;d:2&quot;: [</span>
<span class="s2">                            1,</span>
<span class="s2">                            2</span>
<span class="s2">                        ],</span>
<span class="s2">                        &quot;s:1&quot;: [</span>
<span class="s2">                            1,</span>
<span class="s2">                            2,</span>
<span class="s2">                            3</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;roles_map&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;client&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;_post_logout_redirect_uris&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;New-line delimited list of post-logout redirect URIs&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;_redirect_uris&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;New-line delimited list of redirect URIs&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;client_id&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;model&quot;: null</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;contact_email&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;logo&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;require_consent&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;If disabled, the Server will NEVER ask the user for consent.&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;response_type&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;reuse_consent&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;If enabled, the Server will save the user consent given to a specific client, so that user will not be prompted for the same authorization multiple times.&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;terms_url&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;External reference to the privacy policy of the client.&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;website_url&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;client_id&quot;,</span>
<span class="s2">                &quot;response_type&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;country&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;code&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 2,</span>
<span class="s2">                    &quot;minLength&quot;: 2,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;code&quot;,</span>
<span class="s2">                &quot;name&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;deleted_user&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deleted_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deleter_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;reason&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;username&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;username&quot;,</span>
<span class="s2">                &quot;reason&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;,</span>
<span class="s2">                &quot;deleter_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;deleted_user_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;reason&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;username&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;username&quot;,</span>
<span class="s2">                &quot;reason&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;deleted_user_site&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deleted_user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;deleted_user&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_confirmed_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_confirmed_via&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_requested_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_requested_via&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;site&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;deleted_user_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;deleted_user_site_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;deleted_user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;deleted_user&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_confirmed_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_confirmed_via&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_requested_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_requested_via&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;site&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;deleted_user_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;deleted_user_site_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;deletion_confirmed_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_confirmed_via&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_requested_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;deletion_requested_via&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;deleted_user_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;deleted_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;reason&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;username&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;parent_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;domain&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;name&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;parent_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;domain&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;name&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;grant_implicitly&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;grant_implicitly&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;grant_implicitly&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_role_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;grant_implicitly&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_roles&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An object containing the domain roles defined for a given domain and its lineage.&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;The domain for which the request was made.&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;roles_map&quot;: {</span>
<span class="s2">                    &quot;additionalProperties&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;The list of role ids for the domain&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;description&quot;: &quot;A dictionary where the keys are domain ids prefixed with `d:` and the values are lists of role ids.&quot;,</span>
<span class="s2">                    &quot;example&quot;: {</span>
<span class="s2">                        &quot;d:1&quot;: [</span>
<span class="s2">                            1</span>
<span class="s2">                        ],</span>
<span class="s2">                        &quot;d:2&quot;: [</span>
<span class="s2">                            1,</span>
<span class="s2">                            2</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;roles_map&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;parent_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;domain&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;health_info&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;Health check response&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;access_control_health&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;authentication_service_health&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;host&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;server_timestamp&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_data_store_health&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;version&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;host&quot;,</span>
<span class="s2">                &quot;server_timestamp&quot;,</span>
<span class="s2">                &quot;version&quot;,</span>
<span class="s2">                &quot;access_control_health&quot;,</span>
<span class="s2">                &quot;user_data_store_health&quot;,</span>
<span class="s2">                &quot;authentication_service_health&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;expires_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;first_name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;invitor_id&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;The user that created the invitation&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;user&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;last_name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;organisation_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;organisation&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;invitor_id&quot;,</span>
<span class="s2">                &quot;first_name&quot;,</span>
<span class="s2">                &quot;last_name&quot;,</span>
<span class="s2">                &quot;email&quot;,</span>
<span class="s2">                &quot;organisation_id&quot;,</span>
<span class="s2">                &quot;expires_at&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;expires_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;first_name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;last_name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;organisation_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;organisation&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;first_name&quot;,</span>
<span class="s2">                &quot;last_name&quot;,</span>
<span class="s2">                &quot;email&quot;,</span>
<span class="s2">                &quot;organisation_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_domain_role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;invitation_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;email&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;invitation_id&quot;,</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_domain_role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;invitation_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;email&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;invitation_id&quot;,</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_site_role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;invitation_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;email&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;invitation_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_site_role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;invitation_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;email&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;invitation_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;expires_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;first_name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;last_name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;organisation_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;organisation&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;organisation&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;name&quot;,</span>
<span class="s2">                &quot;description&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;organisation_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;name&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;organisation_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;permission&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 50,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;name&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;permission_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 50,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;name&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;permission_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 50,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;purged_invitations&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;amount&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;mode&quot;: {</span>
<span class="s2">                    &quot;enum&quot;: [</span>
<span class="s2">                        &quot;asynchronous&quot;,</span>
<span class="s2">                        &quot;synchronous&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;mode&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;request_user_deletion&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;reason&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;reason&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;resource&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;urn&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;urn&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;resource_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;urn&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;urn&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;resource_permission&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;permission&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;resource&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;resource&quot;,</span>
<span class="s2">                &quot;permission&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;resource_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;urn&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;label&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;,</span>
<span class="s2">                        &quot;#/definitions/role&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                &quot;requires_2fa&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;label&quot;,</span>
<span class="s2">                &quot;requires_2fa&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;label&quot;: {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/definitions/role_label&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;,</span>
<span class="s2">                        &quot;#/definitions/role_create&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                &quot;requires_2fa&quot;: {</span>
<span class="s2">                    &quot;default&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;label&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role_label&quot;: {</span>
<span class="s2">            &quot;maxLength&quot;: 100,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role_resource_permission&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;permission_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;resource_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;urn&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;resource_id&quot;,</span>
<span class="s2">                &quot;permission_id&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role_resource_permission_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;permission_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;resource_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;urn&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;resource_id&quot;,</span>
<span class="s2">                &quot;permission_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;label&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;requires_2fa&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;client_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;is_active&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;name&quot;,</span>
<span class="s2">                &quot;is_active&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_and_domain_roles&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An object containing the site- and domain lineage roles defined for a given site.&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;roles_map&quot;: {</span>
<span class="s2">                    &quot;additionalProperties&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;The list of role ids for the site or domain&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;description&quot;: &quot;A dictionary where the keys are site and domain ids prefixed with `s:` and `d:`, respectively and the values are lists of role ids.&quot;,</span>
<span class="s2">                    &quot;example&quot;: {</span>
<span class="s2">                        &quot;d:1&quot;: [</span>
<span class="s2">                            1</span>
<span class="s2">                        ],</span>
<span class="s2">                        &quot;d:2&quot;: [</span>
<span class="s2">                            1,</span>
<span class="s2">                            2</span>
<span class="s2">                        ],</span>
<span class="s2">                        &quot;s:1&quot;: [</span>
<span class="s2">                            1,</span>
<span class="s2">                            2,</span>
<span class="s2">                            3</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;The site for which the request was made.&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;roles_map&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;client_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;is_active&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;name&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_data_schema&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;schema&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;schema&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_data_schema_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;schema&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;schema&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_data_schema_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;schema&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;grant_implicitly&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;grant_implicitly&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;grant_implicitly&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_role_labels_aggregated&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An object containing a site ID and an aggregated list of all the role labels supported by the site and all the domains in its lineage.&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;roles&quot;: {</span>
<span class="s2">                    &quot;items&quot;: {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/definitions/role_label&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;,</span>
<span class="s2">                            &quot;#/definitions/site_role_labels_aggregated&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_role_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;grant_implicitly&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;client_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;description&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;is_active&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;name&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 100,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;avatar&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;birth_date&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;country_code&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 2,</span>
<span class="s2">                    &quot;minLength&quot;: 2,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;field&quot;: &quot;code&quot;,</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;country&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;date_joined&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email_verified&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;first_name&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;gender&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;The UUID of the user&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;is_active&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;Designates whether this user should be treated as active. Deselect this instead of deleting accounts.&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;last_login&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;last_name&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 15,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn_verified&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;organisation_id&quot;: {</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;organisation&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;username&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;id&quot;,</span>
<span class="s2">                &quot;username&quot;,</span>
<span class="s2">                &quot;is_active&quot;,</span>
<span class="s2">                &quot;date_joined&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_domain_role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_domain_role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;domain_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_permissions_check&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;domain_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;nocache&quot;: {</span>
<span class="s2">                    &quot;default&quot;: false,</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;operator&quot;: {</span>
<span class="s2">                    &quot;enum&quot;: [</span>
<span class="s2">                        &quot;all&quot;,</span>
<span class="s2">                        &quot;any&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;resource_permissions&quot;: {</span>
<span class="s2">                    &quot;items&quot;: {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/definitions/resource_permission&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;,</span>
<span class="s2">                            &quot;#/definitions/user_permissions_check&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;operator&quot;,</span>
<span class="s2">                &quot;resource_permissions&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_permissions_check_response&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;has_permissions&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;has_permissions&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_site_data&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;data&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;data&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_site_data_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;data&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;data&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_site_data_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;data&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_site_role&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;created_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;updated_at&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                    &quot;readOnly&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;,</span>
<span class="s2">                &quot;created_at&quot;,</span>
<span class="s2">                &quot;updated_at&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_site_role_create&quot;: {</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;role_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;label&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;label&quot;: &quot;username&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;required&quot;: [</span>
<span class="s2">                &quot;user_id&quot;,</span>
<span class="s2">                &quot;site_id&quot;,</span>
<span class="s2">                &quot;role_id&quot;</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_site_role_labels_aggregated&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An object containing a user ID, site ID and an aggregated list of all the role labels assigned to the user for the site and all the domains in its lineage.&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;roles&quot;: {</span>
<span class="s2">                    &quot;items&quot;: {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/definitions/role_label&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;,</span>
<span class="s2">                            &quot;#/definitions/user_site_role_labels_aggregated&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;site_id&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;user_id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_update&quot;: {</span>
<span class="s2">            &quot;minProperties&quot;: 1,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;avatar&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uri&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;birth_date&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;date&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;country_code&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 2,</span>
<span class="s2">                    &quot;minLength&quot;: 2,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                    &quot;x-related-info&quot;: {</span>
<span class="s2">                        &quot;field&quot;: &quot;code&quot;,</span>
<span class="s2">                        &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                        &quot;model&quot;: &quot;country&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;format&quot;: &quot;email&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;email_verified&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;first_name&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;gender&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;is_active&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;Designates whether this user should be treated as active. Deselect this instead of deleting accounts.&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;last_name&quot;: {</span>
<span class="s2">                    &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn&quot;: {</span>
<span class="s2">                    &quot;maxLength&quot;: 15,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;msisdn_verified&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_with_roles&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A user with their roles.&quot;,</span>
<span class="s2">            &quot;properties&quot;: {</span>
<span class="s2">                &quot;id&quot;: {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;roles&quot;: {</span>
<span class="s2">                    &quot;items&quot;: {</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                },</span>
<span class="s2">                &quot;username&quot;: {</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;type&quot;: &quot;object&quot;</span>
<span class="s2">        }</span>
<span class="s2">    },</span>
<span class="s2">    &quot;host&quot;: &quot;localhost:5000&quot;,</span>
<span class="s2">    &quot;info&quot;: {</span>
<span class="s2">        &quot;description&quot;: &quot;The Management Layer API exposes the functionality that is available to users. Access to this API is based on a user token that must be presented with every request.</span><span class="se">\\</span><span class="s2">n</span><span class="se">\\</span><span class="s2">nThe Management Layer ties together the User Data Store, Access Control System and Authentication Service. It performs permission checking and audit logging.</span><span class="se">\\</span><span class="s2">n&quot;,</span>
<span class="s2">        &quot;title&quot;: &quot;Management Layer API&quot;,</span>
<span class="s2">        &quot;version&quot;: &quot;&quot;</span>
<span class="s2">    },</span>
<span class="s2">    &quot;parameters&quot;: {</span>
<span class="s2">        &quot;admin_note_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique integer value identifying the admin note.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;admin_note_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;client_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A integer identifying the client&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;client_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;country_code&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique two-character value identifying the country.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;maxLength&quot;: 2,</span>
<span class="s2">            &quot;minLength&quot;: 2,</span>
<span class="s2">            &quot;name&quot;: &quot;country_code&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique integer value identifying the domain.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;domain_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A UUID value identifying the invitation.&quot;,</span>
<span class="s2">            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;invitation_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_cutoff_date&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional cutoff date to purge invites before this date&quot;,</span>
<span class="s2">            &quot;format&quot;: &quot;date&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;cutoff_date&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_deleter_id_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by deleter_id&quot;,</span>
<span class="s2">            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;deleter_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_domain_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by domain_id&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;domain_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">            &quot;x-related-info&quot;: {</span>
<span class="s2">                &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                &quot;rest_resource_name&quot;: &quot;domains&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_invitation_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by invitation_id&quot;,</span>
<span class="s2">            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;invitation_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_limit&quot;: {</span>
<span class="s2">            &quot;default&quot;: 20,</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to limit the number of results returned.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;maximum&quot;: 100,</span>
<span class="s2">            &quot;minimum&quot;: 1,</span>
<span class="s2">            &quot;name&quot;: &quot;limit&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">            &quot;x-admin-on-rest-exclude&quot;: true</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_nocache&quot;: {</span>
<span class="s2">            &quot;default&quot;: false,</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to instructing an API call to by pass caches when reading data.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;nocache&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_offset&quot;: {</span>
<span class="s2">            &quot;default&quot;: 0,</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter specifying the offset in the result set to start from.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;minimum&quot;: 0,</span>
<span class="s2">            &quot;name&quot;: &quot;offset&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">            &quot;x-admin-on-rest-exclude&quot;: true</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_parent_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by parent_id&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;parent_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">            &quot;x-related-info&quot;: {</span>
<span class="s2">                &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                &quot;rest_resource_name&quot;: &quot;domains&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_portal_context_header&quot;: {</span>
<span class="s2">            &quot;in&quot;: &quot;header&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;X-GE-Portal-Context&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_role_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by role_id&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;role_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">            &quot;x-related-info&quot;: {</span>
<span class="s2">                &quot;label&quot;: &quot;label&quot;,</span>
<span class="s2">                &quot;rest_resource_name&quot;: &quot;roles&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_site_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by site_id&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;site_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;,</span>
<span class="s2">            &quot;x-related-info&quot;: {</span>
<span class="s2">                &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                &quot;rest_resource_name&quot;: &quot;sites&quot;</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;optional_user_filter&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An optional query parameter to filter by user_id&quot;,</span>
<span class="s2">            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;user_id&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;organisation_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;An integer identifying an organisation&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;organisation_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;permission_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique integer value identifying the permission.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;permission_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;resource_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique integer value identifying the resource.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;resource_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique integer value identifying the role.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;role_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A unique integer value identifying the site.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;site_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;synchronous_mode&quot;: {</span>
<span class="s2">            &quot;default&quot;: false,</span>
<span class="s2">            &quot;description&quot;: &quot;Change the mode of the call to synchronous.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;synchronous_mode&quot;,</span>
<span class="s2">            &quot;required&quot;: false,</span>
<span class="s2">            &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user_id&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;A UUID value identifying the user.&quot;,</span>
<span class="s2">            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;user_id&quot;,</span>
<span class="s2">            &quot;required&quot;: true,</span>
<span class="s2">            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">        }</span>
<span class="s2">    },</span>
<span class="s2">    &quot;paths&quot;: {</span>
<span class="s2">        &quot;/adminnotes&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;adminnote_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_user_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional query parameter to filter by creator (a user_id)&quot;,</span>
<span class="s2">                        &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;creator_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of adminnote ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;admin_note_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/admin_note&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:adminnote:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;adminnote_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/admin_note_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/admin_note&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:adminnote:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/adminnotes/</span><span class="si">{admin_note_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;adminnote_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Deleted&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:adminnote:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;adminnote_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/admin_note&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:adminnote:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/admin_note_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;adminnote_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/admin_note_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/admin_note&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:adminnote:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/clients&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;client_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of client ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;client_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional client id to filter on. This is not the primary key.&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;client_token_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/client&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:oidc_provider:client:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/clients/</span><span class="si">{client_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;client_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/client&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:oidc_provider:client:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/client_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/countries&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;country_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of country codes&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;maxLength&quot;: 2,</span>
<span class="s2">                            &quot;minLength&quot;: 2,</span>
<span class="s2">                            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;country_codes&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/country&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/countries/</span><span class="si">{country_code}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;country_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/country&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/country_code&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/deletedusers&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;deleteduser_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_deleter_id_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/deleted_user&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deleteduser:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;deleteduser_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deleteduser:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/deletedusers/</span><span class="si">{user_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;deleteduser_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deleteduser:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;deleteduser_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deleteduser:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;deleteduser_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deleteduser:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/deletedusersites&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;deletedusersite_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_user_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/deleted_user_site&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deletedusersite:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;deletedusersite_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_site_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deletedusersite:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/deletedusersites/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;deletedusersite_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deletedusersite:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;deletedusersite_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deletedusersite:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;deletedusersite_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_site_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/deleted_user_site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:deletedusersite:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/domainroles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;domainrole_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_domain_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/domain_role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domainrole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;domainrole_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domainrole:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/domainroles/</span><span class="si">{domain_id}</span><span class="s2">/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;domainrole_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domainrole:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;domainrole_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domainrole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;domainrole_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_role_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domainrole:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/domains&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;domain_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_parent_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of domain ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;domain_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/domain&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domain:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;domain_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domain:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/domains/</span><span class="si">{domain_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;domain_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domain:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;domain_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domain:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;domain_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:domain:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/healthcheck&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get the status of the service.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;healthcheck&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;The service is operating normally.&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/health_info&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;security&quot;: []</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitationdomainroles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationdomainrole_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_invitation_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_domain_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/invitation_domain_role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationdomainrole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationdomainrole_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_domain_role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationdomainrole:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitationdomainroles/</span><span class="si">{invitation_id}</span><span class="s2">/</span><span class="si">{domain_id}</span><span class="s2">/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationdomainrole_delete&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationdomainrole:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationdomainrole_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationdomainrole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/invitation_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitations&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitation_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;Optional filter based on the invitor (the user who created the invitation)&quot;,</span>
<span class="s2">                        &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;invitor_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of invitation ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;invitation_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/invitation&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitation:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitation_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitation:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitations/purge/expired&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;purge_expired_invitations&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/synchronous_mode&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_cutoff_date&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Expired Invitations Purged&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/purged_invitations&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitations/</span><span class="si">{invitation_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitation_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitation:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitation_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitation:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/invitation_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitation_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitation:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitations/</span><span class="si">{invitation_id}</span><span class="s2">/send&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitation_send&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;An invitation email was successfully queued for sending.&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                    &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">                    &quot;name&quot;: &quot;invitation_id&quot;,</span>
<span class="s2">                    &quot;required&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;default&quot;: &quot;en&quot;,</span>
<span class="s2">                    &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                    &quot;name&quot;: &quot;language&quot;,</span>
<span class="s2">                    &quot;required&quot;: false,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitationsiteroles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationsiterole_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_invitation_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_site_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/invitation_site_role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationsiterole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationsiterole_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_site_role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationsiterole:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/invitationsiteroles/</span><span class="si">{invitation_id}</span><span class="s2">/</span><span class="si">{site_id}</span><span class="s2">/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationsiterole_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationsiterole:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;invitationsiterole_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/invitation_site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:invitationsiterole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/invitation_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/all_user_roles/</span><span class="si">{user_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get the effective roles that a user has at any place in the organisational tree.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_all_user_roles&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/all_user_roles&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;404&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;User not found&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/domain_roles/</span><span class="si">{domain_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get the domain and its lineages roles defined for a domain.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_domain_roles&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/domain_roles&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/get_site_from_client_token_id/</span><span class="si">{client_token_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get the site associated with the specified client token id&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_site_from_client_token_id&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;description&quot;: &quot;A client token id. This is not the primary key of the client table, but rather the client id that is typically configured along with the client secret.&quot;,</span>
<span class="s2">                    &quot;in&quot;: &quot;path&quot;,</span>
<span class="s2">                    &quot;name&quot;: &quot;client_token_id&quot;,</span>
<span class="s2">                    &quot;required&quot;: true,</span>
<span class="s2">                    &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/get_sites_under_domain/</span><span class="si">{domain_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of all sites linked directly or indirectly to the specified domain.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_sites_under_domain&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/site&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/site_and_domain_roles/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get the site- and domain lineage roles defined for a given site.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_site_and_domain_roles&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_and_domain_roles&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/site_role_labels_aggregated/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of all possible role labels that a user can have from the specified sites perspective.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_site_role_labels_aggregated&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_role_labels_aggregated&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/user_domain_permissions/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{domain_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of all resource permissions a user has on the specified domain&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_user_domain_permissions&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                            &quot;uniqueItems&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/user_has_permissions/</span><span class="si">{user_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                    &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                    &quot;schema&quot;: {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/definitions/user_permissions_check&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;description&quot;: &quot;Check of the user has the specified resource permissions&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;user_has_permissions&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;True if the user has the permissions, else False&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_permissions_check_response&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;400&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Bad Request&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;404&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;User not found&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/user_management_portal_permissions/</span><span class="si">{user_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;deprecated&quot;: true,</span>
<span class="s2">                &quot;description&quot;: &quot;(DEPRECATED. Use /ops/user_site_permissions instead.) Get a list of all permissions a user has on the Management Portal&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_user_management_portal_permissions&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                            &quot;uniqueItems&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/user_site_permissions/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of all resource permissions a user has on the specified site&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_user_site_permissions&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                            &quot;uniqueItems&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/user_site_role_labels_aggregated/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of all role labels that the specified user has from the specified sites perspective.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_user_site_role_labels_aggregated&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_role_labels_aggregated&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/users_with_roles_for_domain/</span><span class="si">{domain_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of Users with their effective roles within the given domain.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_users_with_roles_for_domain&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/user_with_roles&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;404&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Domain not found&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/ops/users_with_roles_for_site/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Get a list of Users with their effective roles within the given site.&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;get_users_with_roles_for_site&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/user_with_roles&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;404&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Site not found&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;operational&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/organisations&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;organisation_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of organisation ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;organisation_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/organisation&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:organisation:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;organisation_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/organisation_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/organisation&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:organisation:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/organisations/</span><span class="si">{organisation_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;organisation_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:organisation:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;organisation_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/organisation&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:organisation:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/organisation_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;organisation_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/organisation_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/organisation&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:organisation:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/permissions&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;permission_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of permission ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;permission_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/permission&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:permission:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;permission_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/permission_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/permission&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:permission:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/permissions/</span><span class="si">{permission_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;permission_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:permission:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;permission_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/permission&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:permission:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/permission_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;permission_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/permission_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/permission&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:permission:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/all&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh all mapping information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_all&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed all mapping data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/clients&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh OIDC client information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_clients&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed OIDC client data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/domains&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh domain mapping information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_domains&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed domain mapping data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/keys&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh JWKS information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_keys&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed keys data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/permissions&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh permission mapping information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_permissions&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed permission mapping data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/resources&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh resource mapping information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_resources&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed resource mapping data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/roles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh role mapping information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_roles&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed role mapping data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/refresh/sites&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;description&quot;: &quot;Refresh site mapping information&quot;,</span>
<span class="s2">                &quot;operationId&quot;: &quot;refresh_sites&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Successfully refreshed site mapping data&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    &quot;403&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;Forbidden&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                }</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_nocache&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/request_user_deletion&quot;: {</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;request_user_deletion&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;required&quot;: true,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/request_user_deletion&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/resources&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;resource_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional URN prefix filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;prefix&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of resource ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;resource_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/resource&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:resource:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;resource_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/resource_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/resource&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:resource:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/resources/</span><span class="si">{resource_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;resource_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:resource:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;resource_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/resource&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:resource:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/resource_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;resource_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/resource_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/resource&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:resource:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/roleresourcepermissions&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;roleresourcepermission_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional resource filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;resource_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional permission filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;permission_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/role_resource_permission&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:roleresourcepermission:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;roleresourcepermission_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role_resource_permission_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role_resource_permission&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:roleresourcepermission:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/roleresourcepermissions/</span><span class="si">{role_id}</span><span class="s2">/</span><span class="si">{resource_id}</span><span class="s2">/</span><span class="si">{permission_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;roleresourcepermission_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:roleresourcepermission:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;roleresourcepermission_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role_resource_permission&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:roleresourcepermission:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/resource_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/permission_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/roles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;role_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of role ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;role_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:role:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;role_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:role:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/roles/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;role_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:role:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;role_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:role:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;role_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:role:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/sitedataschemas&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;sitedataschema_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of site ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;site_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/site_data_schema&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:sitedataschema:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;sitedataschema_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_data_schema_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_data_schema&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:sitedataschema:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/sitedataschemas/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;sitedataschema_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:sitedataschema:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;sitedataschema_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_data_schema&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:sitedataschema:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;sitedataschema_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_data_schema_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_data_schema&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:sitedataschema:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/siteroles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;siterole_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_site_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/site_role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:siterole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;siterole_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:siterole:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/siteroles/</span><span class="si">{site_id}</span><span class="s2">/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;siterole_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:siterole:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;siterole_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:siterole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;siterole_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_role_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:siterole:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/sites&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;site_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of site ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;site_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional client id to filter on&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;client_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/site&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:site:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;site_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:site:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/sites/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;site_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:site:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;site_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:site:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;site_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/site&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:site:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/userdomainroles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;userdomainrole_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_user_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_domain_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/user_domain_role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:userdomainrole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;userdomainrole_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_domain_role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:userdomainrole:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/userdomainroles/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{domain_id}</span><span class="s2">/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;userdomainrole_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:userdomainrole:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;userdomainrole_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_domain_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:userdomainrole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/domain_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/users&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;user_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional birth_date range filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;birth_date&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                        &quot;x-aor-filter&quot;: {</span>
<span class="s2">                            &quot;format&quot;: &quot;date&quot;,</span>
<span class="s2">                            &quot;range&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional country filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;maxLength&quot;: 2,</span>
<span class="s2">                        &quot;minLength&quot;: 2,</span>
<span class="s2">                        &quot;name&quot;: &quot;country&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                        &quot;x-related-info&quot;: {</span>
<span class="s2">                            &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                            &quot;rest_resource_name&quot;: &quot;countries&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional date joined range filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;date_joined&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                        &quot;x-aor-filter&quot;: {</span>
<span class="s2">                            &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                            &quot;range&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive email inner match filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;email&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional email verified filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;email_verified&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive first name inner match filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;first_name&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional gender filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;gender&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional is_active filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;is_active&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional last login range filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;last_login&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                        &quot;x-aor-filter&quot;: {</span>
<span class="s2">                            &quot;format&quot;: &quot;date&quot;,</span>
<span class="s2">                            &quot;range&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive last name inner match filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;last_name&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive MSISDN inner match filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;msisdn&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional MSISDN verified filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;msisdn_verified&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive nickname inner match filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;nickname&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional filter on the organisation id&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;organisation_id&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional updated_at range filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;updated_at&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;,</span>
<span class="s2">                        &quot;x-aor-filter&quot;: {</span>
<span class="s2">                            &quot;format&quot;: &quot;date-time&quot;,</span>
<span class="s2">                            &quot;range&quot;: true</span>
<span class="s2">                        }</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive username inner match filter&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;username&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional case insensitive inner match filter across all searchable text fields&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;minLength&quot;: 3,</span>
<span class="s2">                        &quot;name&quot;: &quot;q&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional filter based on whether a user has 2FA enabled or not&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;tfa_enabled&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional filter based on whether a user belongs to an organisation or not&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;has_organisation&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;boolean&quot;</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;Fields and directions to order by, e.g. </span><span class="se">\\</span><span class="s2">&quot;-created_at,username</span><span class="se">\\</span><span class="s2">&quot;. Add </span><span class="se">\\</span><span class="s2">&quot;-</span><span class="se">\\</span><span class="s2">&quot; in front of a field name to indicate descending order.&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;name&quot;: &quot;order_by&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of user ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;format&quot;: &quot;uuid&quot;,</span>
<span class="s2">                            &quot;type&quot;: &quot;string&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;user_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;collectionFormat&quot;: &quot;csv&quot;,</span>
<span class="s2">                        &quot;description&quot;: &quot;An optional list of site ids&quot;,</span>
<span class="s2">                        &quot;in&quot;: &quot;query&quot;,</span>
<span class="s2">                        &quot;items&quot;: {</span>
<span class="s2">                            &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;minItems&quot;: 1,</span>
<span class="s2">                        &quot;name&quot;: &quot;site_ids&quot;,</span>
<span class="s2">                        &quot;required&quot;: false,</span>
<span class="s2">                        &quot;type&quot;: &quot;array&quot;,</span>
<span class="s2">                        &quot;uniqueItems&quot;: true,</span>
<span class="s2">                        &quot;x-related-info&quot;: {</span>
<span class="s2">                            &quot;label&quot;: &quot;name&quot;,</span>
<span class="s2">                            &quot;rest_resource_name&quot;: &quot;sites&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/user&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:user:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/users/</span><span class="si">{user_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;user_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:user:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;user_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:user:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;user_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;authentication&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:identity_provider:user:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/usersitedata&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersitedata_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_user_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_site_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/user_site_data&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:usersitedata:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersitedata_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_data_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_data&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:usersitedata:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/usersitedata/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{site_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersitedata_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:usersitedata:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersitedata_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_data&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:usersitedata:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;put&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersitedata_update&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_data_update&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_data&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;user_data&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:user_data:usersitedata:update&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/usersiteroles&quot;: {</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersiterole_list&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_offset&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_limit&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_user_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_site_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    },</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;$ref&quot;: &quot;#/parameters/optional_role_filter&quot;,</span>
<span class="s2">                        &quot;x-scope&quot;: [</span>
<span class="s2">                            &quot;&quot;</span>
<span class="s2">                        ]</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;headers&quot;: {</span>
<span class="s2">                            &quot;X-Total-Count&quot;: {</span>
<span class="s2">                                &quot;description&quot;: &quot;The total number of results matching the query&quot;,</span>
<span class="s2">                                &quot;type&quot;: &quot;integer&quot;</span>
<span class="s2">                            }</span>
<span class="s2">                        },</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;items&quot;: {</span>
<span class="s2">                                &quot;$ref&quot;: &quot;#/definitions/user_site_role&quot;,</span>
<span class="s2">                                &quot;x-scope&quot;: [</span>
<span class="s2">                                    &quot;&quot;</span>
<span class="s2">                                ]</span>
<span class="s2">                            },</span>
<span class="s2">                            &quot;type&quot;: &quot;array&quot;</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:usersiterole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;post&quot;: {</span>
<span class="s2">                &quot;consumes&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersiterole_create&quot;,</span>
<span class="s2">                &quot;parameters&quot;: [</span>
<span class="s2">                    {</span>
<span class="s2">                        &quot;in&quot;: &quot;body&quot;,</span>
<span class="s2">                        &quot;name&quot;: &quot;data&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_role_create&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;201&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:usersiterole:create&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            }</span>
<span class="s2">        },</span>
<span class="s2">        &quot;/usersiteroles/</span><span class="si">{user_id}</span><span class="s2">/</span><span class="si">{site_id}</span><span class="s2">/</span><span class="si">{role_id}</span><span class="s2">&quot;: {</span>
<span class="s2">            &quot;delete&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersiterole_delete&quot;,</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;204&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:usersiterole:delete&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;get&quot;: {</span>
<span class="s2">                &quot;operationId&quot;: &quot;usersiterole_read&quot;,</span>
<span class="s2">                &quot;produces&quot;: [</span>
<span class="s2">                    &quot;application/json&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;responses&quot;: {</span>
<span class="s2">                    &quot;200&quot;: {</span>
<span class="s2">                        &quot;description&quot;: &quot;&quot;,</span>
<span class="s2">                        &quot;schema&quot;: {</span>
<span class="s2">                            &quot;$ref&quot;: &quot;#/definitions/user_site_role&quot;,</span>
<span class="s2">                            &quot;x-scope&quot;: [</span>
<span class="s2">                                &quot;&quot;</span>
<span class="s2">                            ]</span>
<span class="s2">                        }</span>
<span class="s2">                    }</span>
<span class="s2">                },</span>
<span class="s2">                &quot;tags&quot;: [</span>
<span class="s2">                    &quot;access_control&quot;</span>
<span class="s2">                ],</span>
<span class="s2">                &quot;x-aor-permissions&quot;: [</span>
<span class="s2">                    &quot;urn:ge:access_control:usersiterole:read&quot;</span>
<span class="s2">                ]</span>
<span class="s2">            },</span>
<span class="s2">            &quot;parameters&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/optional_portal_context_header&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/user_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/site_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;$ref&quot;: &quot;#/parameters/role_id&quot;,</span>
<span class="s2">                    &quot;x-scope&quot;: [</span>
<span class="s2">                        &quot;&quot;</span>
<span class="s2">                    ]</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        }</span>
<span class="s2">    },</span>
<span class="s2">    &quot;schemes&quot;: [</span>
<span class="s2">        &quot;http&quot;,</span>
<span class="s2">        &quot;https&quot;</span>
<span class="s2">    ],</span>
<span class="s2">    &quot;security&quot;: [</span>
<span class="s2">        {</span>
<span class="s2">            &quot;OAuth2&quot;: []</span>
<span class="s2">        },</span>
<span class="s2">        {</span>
<span class="s2">            &quot;ApiKeyAuth&quot;: []</span>
<span class="s2">        }</span>
<span class="s2">    ],</span>
<span class="s2">    &quot;securityDefinitions&quot;: {</span>
<span class="s2">        &quot;ApiKeyAuth&quot;: {</span>
<span class="s2">            &quot;description&quot;: &quot;Workaround for lack of OIDC support. Use </span><span class="se">\\</span><span class="s2">&quot;Bearer id_token_goes_here</span><span class="se">\\</span><span class="s2">&quot; as the value.&quot;,</span>
<span class="s2">            &quot;in&quot;: &quot;header&quot;,</span>
<span class="s2">            &quot;name&quot;: &quot;Authorization&quot;,</span>
<span class="s2">            &quot;type&quot;: &quot;apiKey&quot;</span>
<span class="s2">        },</span>
<span class="s2">        &quot;OAuth2&quot;: {</span>
<span class="s2">            &quot;authorizationUrl&quot;: &quot;http://localhost:8000/openid/authorize&quot;,</span>
<span class="s2">            &quot;flow&quot;: &quot;accessCode&quot;,</span>
<span class="s2">            &quot;scopes&quot;: {</span>
<span class="s2">                &quot;address&quot;: &quot;Addresses&quot;,</span>
<span class="s2">                &quot;email&quot;: &quot;Email&quot;,</span>
<span class="s2">                &quot;openid&quot;: &quot;Grants access to fields required by OpenID&quot;,</span>
<span class="s2">                &quot;phone&quot;: &quot;Phone numbers&quot;,</span>
<span class="s2">                &quot;profile&quot;: &quot;Profile fields&quot;,</span>
<span class="s2">                &quot;roles&quot;: &quot;Grants access to user roles&quot;,</span>
<span class="s2">                &quot;site&quot;: &quot;Grants access to site-specific data&quot;</span>
<span class="s2">            },</span>
<span class="s2">            &quot;tokenUrl&quot;: &quot;http:///localhost:8000/openid/token&quot;,</span>
<span class="s2">            &quot;type&quot;: &quot;oauth2&quot;</span>
<span class="s2">        }</span>
<span class="s2">    },</span>
<span class="s2">    &quot;swagger&quot;: &quot;2.0&quot;,</span>
<span class="s2">    &quot;x-detail-page-definitions&quot;: {</span>
<span class="s2">        &quot;deleteduser&quot;: {</span>
<span class="s2">            &quot;inlines&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;site_id&quot;,</span>
<span class="s2">                        &quot;deletion_requested_at&quot;,</span>
<span class="s2">                        &quot;deletion_requested_via&quot;,</span>
<span class="s2">                        &quot;deletion_confirmed_at&quot;,</span>
<span class="s2">                        &quot;deletion_confirmed_via&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;deleted_user_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Sites which the user visited&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;deleted_user_site&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;domain&quot;: {</span>
<span class="s2">            &quot;inlines&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;id&quot;,</span>
<span class="s2">                        &quot;name&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;parent_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Child Domains&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;domain&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;role_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;domain_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Roles&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;domain_role&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;invitation&quot;: {</span>
<span class="s2">            &quot;inlines&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;domain_id&quot;,</span>
<span class="s2">                        &quot;role_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;invitation_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Domain Roles&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;invitation_domain_role&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;site_id&quot;,</span>
<span class="s2">                        &quot;role_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;invitation_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Site Roles&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;invitation_site_role&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;role&quot;: {</span>
<span class="s2">            &quot;inlines&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;resource_id&quot;,</span>
<span class="s2">                        &quot;permission_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;role_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Resource Permissions&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;role_resource_permission&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;site&quot;: {</span>
<span class="s2">            &quot;inlines&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;role_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;site_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Roles&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;site_role&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ]</span>
<span class="s2">        },</span>
<span class="s2">        &quot;user&quot;: {</span>
<span class="s2">            &quot;inlines&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;domain_id&quot;,</span>
<span class="s2">                        &quot;role_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;user_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Domain Roles&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;user_domain_role&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;site_id&quot;,</span>
<span class="s2">                        &quot;data&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;user_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Site Data&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;user_site_data&quot;,</span>
<span class="s2">                    &quot;rest_resource_name&quot;: &quot;usersitedata&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;fields&quot;: [</span>
<span class="s2">                        &quot;site_id&quot;,</span>
<span class="s2">                        &quot;role_id&quot;,</span>
<span class="s2">                        &quot;created_at&quot;,</span>
<span class="s2">                        &quot;updated_at&quot;</span>
<span class="s2">                    ],</span>
<span class="s2">                    &quot;key&quot;: &quot;user_id&quot;,</span>
<span class="s2">                    &quot;label&quot;: &quot;Site Roles&quot;,</span>
<span class="s2">                    &quot;model&quot;: &quot;user_site_role&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;sortable_fields&quot;: [</span>
<span class="s2">                &quot;id&quot;</span>
<span class="s2">            ]</span>
<span class="s2">        }</span>
<span class="s2">    }</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Override this function if further customisation to the spec is required.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Mod spec to point to demo application</span>
        <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SPEC</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">spec</span><span class="p">[</span><span class="s2">&quot;basePath&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span>
        <span class="n">spec</span><span class="p">[</span><span class="s2">&quot;host&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;localhost:8000&quot;</span>
        <span class="c1"># Add basic auth as a security definition</span>
        <span class="n">security_definitions</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;securityDefinitions&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">security_definitions</span><span class="p">[</span><span class="s2">&quot;basic_auth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;basic&quot;</span><span class="p">}</span>
        <span class="n">spec</span><span class="p">[</span><span class="s2">&quot;securityDefinitions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">security_definitions</span>
        <span class="k">return</span> <span class="n">json_response</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Girl Effect.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>